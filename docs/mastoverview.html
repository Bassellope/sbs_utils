<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What is Mast &mdash; SBS Utils 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Language Basics" href="mastsyntax.html" />
    <link rel="prev" title="Contribution" href="index_contrib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SBS Utils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index_desc.html">Utilities for Artemis Cosmos</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_contrib.html">Contribution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Mast and PyMast:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">What is Mast</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mast-execution-flow">Mast execution flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mast-and-pymast">Mast and PyMast</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mast-and-pausing-the-flow">Mast and pausing the flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sub-plots-aka-tasks">Sub plots aka Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#schedulers">Schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mast-object-model">Mast Object Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-language">Basic Language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data">Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-assignment">Simple assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-python-with-assignment">Using python with assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shared-data-assignment">Shared data assignment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#task-flow-story-sections-via-labels">Task Flow: Story sections via labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#labels">Labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#state-flow-changes-jump-push-pop">State/Flow changes: Jump, Push, Pop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#jump">Jump</a></li>
<li class="toctree-l4"><a class="reference internal" href="#push-pop">Push/Pop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#jump-to-end">Jump to End</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scheduling-tasks-and-waiting-for-them-to-complete">Scheduling tasks and waiting for them to complete</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scheduling-tasks-in-mast">Scheduling tasks in mast</a></li>
<li class="toctree-l4"><a class="reference internal" href="#passing-data-to-a-task">passing data to a task</a></li>
<li class="toctree-l4"><a class="reference internal" href="#named-task-and-waiting-for-a-task-or-tasks">Named task and waiting for a Task or Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awaiting-for-any-or-all-tasks">Awaiting for any or all tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#canceling-a-task">Canceling a task</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conditional-statements">Conditional Statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#if-statements">If statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-statements">Match statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-loops">For loops</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#comments-and-markers">Comments and Markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multi-line-comments-aka-block-comments">Multi line Comments aka block comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#importing">Importing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delay-command">Delay command</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mastsyntax.html">Language Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="mastsbssyntax.html">Engine Interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="maststorysyntax.html">Story Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="mastextending.html">TBD</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/entry.html">Entry Points, events, and handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/gui.html">Adding Gui pages and using the Gui System</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/mast.html">Adding MAST to you mission</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Entity Creation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="spaceobject.html">Space Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="roles.html">The roles system</a></li>
<li class="toctree-l1"><a class="reference internal" href="targeting.html">The targeting system</a></li>
<li class="toctree-l1"><a class="reference internal" href="vec.html">The vector class</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatter.html">The Scatter modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="faces.html">The Faces module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Systems:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI system</a></li>
<li class="toctree-l1"><a class="reference internal" href="consoledispatcher.html">Console Dispatcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="damagedispatcher.html">The Damage Dispatcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="tickdispatcher.html">TickDispatcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="hookhandlers.html">The hook Handlers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SBS Utils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">What is Mast</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mastoverview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="what-is-mast">
<h1>What is Mast<a class="headerlink" href="#what-is-mast" title="Permalink to this heading"></a></h1>
<p>Mast is an abbreviation for Multiple Agent Story Telling. It is for writing in a narrative flow that tells a ‘story’. The stroy has multiple agents: players, non-player characters, etc. Each of these agents have their own story and those stories can have multiple side plots.</p>
<p>Stories have a forward moving flow. There is a begining, a middle and an end. Mast has a programming flow that keep the story moving forward. Mast also allows for interactive narrative this allows for choice and branching of the story, revisiting aspects of the story etc. With this it still flows the story on a single path.</p>
<p>Mast in Artemis Cosmos the multiple agents are the player consoles, the ships and various characters that can be on ships, etc. Artemis cosmos has the ability to add much more charatecters to the game. For example there can be multiple chracters on a space stations that you may interact with. The Damage Control teams can have richer stories and each can be unique.</p>
<section id="mast-execution-flow">
<h2>Mast execution flow<a class="headerlink" href="#mast-execution-flow" title="Permalink to this heading"></a></h2>
<p>The goal of Mast is to enable non-programmers to be productive in creating interactive narratives.</p>
<p>The Mast language is a programming language that strips many of the programming language concepts that make writing interactive narratives difficult as well a simplified syntax.</p>
<p>The intent is to be approachable to non-programmers. It is not intended to be ‘structured’ programming language like C++ or Python.</p>
<p>The flow of mast is similar to the original BASIC programming langauge. The code executes moving forward, it can branch by jumping to new locations (labels). This can be called ‘unstructured’ programming. Mast was also influenced by choice script, Inkle’s Ink, and others.</p>
<div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">========= start =======</span>
log &quot;Hello, world&quot;
<span class="gd">-&gt; goodbye</span>
<span class="gh">====== not_here =======</span>
log &quot;I get jumped over&quot;
<span class="gh">======= goodbye =======</span>
log &quot;Goodbye&quot;
</pre></div>
</div>
<p>This is the expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Hello</span><span class="p">,</span> <span class="n">world</span>
<span class="n">Goodbye</span>
</pre></div>
</div>
</section>
<section id="mast-and-pymast">
<h2>Mast and PyMast<a class="headerlink" href="#mast-and-pymast" title="Permalink to this heading"></a></h2>
<p>Mast is a standalone language running inside of the python system provided by Artemis Cosmos.</p>
<p>PyMast is python code that runs using the Mast execution flow. This gives python programmers the benefits of Mast’s simple flow while enabling greater access to the native python.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-0-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-0-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">========= start =======</span>
log &quot;Hello, world&quot;
<span class="gd">-&gt; goodbye</span>
<span class="gh">====== not_here =======</span>
log &quot;I get jumped over&quot;
<span class="gh">======= goodbye =======</span>
log &quot;Goodbye&quot;
</pre></div>
</div>
</div><div aria-labelledby="tab-0-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">jump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">goodbye</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">not_here</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I get jumped over&quot;</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">goodbye</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goodbye&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>This is the expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Hello</span><span class="p">,</span> <span class="n">world</span>
<span class="n">Goodbye</span>
</pre></div>
</div>
</section>
<section id="mast-and-pausing-the-flow">
<h2>Mast and pausing the flow<a class="headerlink" href="#mast-and-pausing-the-flow" title="Permalink to this heading"></a></h2>
<p>Mast is running as part of a game engine. The engine only give Mast a small amount of time to run. If Mast ran unconditionally it would not allow the engine to run and stall the game. However, there are times a story cannot continue until conditions are met. e.g. A comms button is press, a science scan it started etc.</p>
<p>Mast can “pause” execution and yield control back to the engine. The engine keeps calling MAst and it yields until the condition is met teh the flow can continue.</p>
<p>This example prints “Hello, world” and five seconds later it prints “Goodbye”. During that five seonds the engine is able to run because Mast yields control back since it cannot move forward.</p>
<p>This ability to yield control back to the engine is a reason that Mast flow can be enable users to focus on the flow of the story and not how to get the programming lanuage to deal with this.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-1-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-1-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">========= start =======</span>
log &quot;Hello, world&quot;
delay gui 5s
log &quot;Goodbye&quot;
</pre></div>
</div>
</div><div aria-labelledby="tab-1-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goodbye&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Yielding control is handled by Mast. If there ever is a time you need to force a yield you can us the Mast ‘yeild’ command. In PyMast the python keyword yield is used, however you must specify how to yield by providing a PollResults.OK_RUN_AGAIN. There are other types of yields in PyMast. This is not the time to detail those uses.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-2-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-2-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">========= start =======</span>
log &quot;Hello, world&quot;
yield
log &quot;Goodbye&quot;
</pre></div>
</div>
</div><div aria-labelledby="tab-2-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">PollResults</span><span class="o">.</span><span class="n">OK_RUN_AGAIN</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goodbye&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>In future topics there will be other times descibed when Mast yields. Typically this is when MAst is waiting for something to occur. For example:</p>
<ul class="simple">
<li><p>time (e.g. the delay used in the examples)</p></li>
<li><p>awaiting a choice to be made in the gui</p></li>
<li><p>awaiting a comms button to be selected</p></li>
<li><p>awaiting a science scan</p></li>
</ul>
</section>
<section id="sub-plots-aka-tasks">
<h2>Sub plots aka Tasks<a class="headerlink" href="#sub-plots-aka-tasks" title="Permalink to this heading"></a></h2>
<p>Mast is MULTI Agent Story Telling so each agent has their own story or event stories.</p>
<p>Mast allows multiple storylines to run in “parallel”.</p>
<p>Mast in Artemis Cosmos is inherently a single thread of execution. These storylines do not run exactly in parallel, but you can run multiple things and make sure they run. These are called Tasks, and tasks can be scheduled so that multiple task can run.</p>
<p>For example a Player Ship can run a Task for handling Comms messages, another for Science scan. This player ship could in fact run multiple tasks for handling comms with different sets of ships.</p>
<p>These tasks themselves act as small side stories, They run as long as needed.</p>
<p>In mast tasks are scheduled in mast with a parallel jump, and in PyMast with a schedule_task</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-3-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-3-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">===== start ====</span>
# Run another task
<span class="gh">=&gt; count_to_ten</span>
delay gui 15s
log &quot;done&quot;

<span class="gh">===== count_to_ten ======</span>
for x in range(10):
    log &quot;{x}&quot;
    yield
next x
</pre></div>
</div>
</div><div aria-labelledby="tab-3-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-3-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schedule_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count_to_ten</span><span class="p">)</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">count_to_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">PollResults</span><span class="o">.</span><span class="n">OK_RUN_AGAIN</span>
</pre></div>
</div>
</div></div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="mi">6</span>
<span class="mi">7</span>
<span class="mi">8</span>
<span class="mi">9</span>
<span class="mi">10</span>
<span class="n">done</span>
</pre></div>
</div>
</section>
<section id="schedulers">
<h2>Schedulers<a class="headerlink" href="#schedulers" title="Permalink to this heading"></a></h2>
<p>Mast and PyMast run all the tasks using schedulers. This process is mostly hidden to the writer of Mast and PyMast code.</p>
<p>Tasks are run on ‘Schedulers’ and to put it simply for now, the server and each Console has a scheduler. Additional scheduler can be created but typically the schedulers run associated with a console with the server running a large number of the tasks.</p>
<p>For example, the server runs a scheduler it may have a task for presenting its User Interface/GUI, and maybe have other task to manage the world creation, handing comms, science etc. Consoles typically have a scheduler an mostly as single task for the User Interface/GUI.</p>
<p>The more complex the script, the more tasks that will run. And if the complexity warrants more schedulers can be created. e.g. schedulers for each player ships etc.</p>
<p>When Artemis Cosmos calls the scripting engine, Mast/PyMast will run al the Schedulers and each scheduler runs all of its Tasks.</p>
<p>As tasks are finished, they are removed. If a scheduler runs and no longer has tasks it is removed.</p>
</section>
<section id="mast-object-model">
<h2>Mast Object Model<a class="headerlink" href="#mast-object-model" title="Permalink to this heading"></a></h2>
<p>Mast needs participants in the story. In stories Artemis Cosmos these participants are:</p>
<ul class="simple">
<li><p>The Story itself (aka the server, the game, the engine or the world)</p></li>
<li><p>Bridge Crew (The player consoles)</p></li>
<li><p>The Player ships (Ships control by the Bridge Crew)</p></li>
<li><p>Non-Player ships Starbases, Enemy Ships, Friendly Ships (Things controled by script)</p></li>
<li><p>The terrain element asteroids, pickups, nebula etc.</p></li>
<li><p>Non-Player Crew and Characters (Seen as faces in engineering, Comms etc.)</p></li>
<li><p>Internals ship location (Rooms and other things)</p></li>
</ul>
<p>These agents/participants are the things in the Artemis Cosmos world. Each of this agents can have stories and tasks associated with them.</p>
</section>
<section id="basic-language">
<h2>Basic Language<a class="headerlink" href="#basic-language" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Data</p></li>
<li><p>Task flow</p></li>
<li><p>Conditional</p></li>
<li><p>Loops</p></li>
<li><p>Scheduling Tasks</p></li>
</ul>
<section id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this heading"></a></h3>
<p>You can create data that is any valid python type.
This data can be used in you mast tasks.</p>
<section id="simple-assignment">
<h4>Simple assignment<a class="headerlink" href="#simple-assignment" title="Permalink to this heading"></a></h4>
<p>To do so you use the assignment statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fred</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Assignment has a variable name an equals followed by a value.</p>
</section>
<section id="using-python-with-assignment">
<h4>Using python with assignment<a class="headerlink" href="#using-python-with-assignment" title="Permalink to this heading"></a></h4>
<p>The assignment is simple and has trouble with more complex python statements e.g. a list of list, etc.
To allow more complex assignments you can wrap the value in ‘snakes’ to have the python compiler used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">players_inventory</span> <span class="o">=</span> <span class="o">~~</span> <span class="p">[</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span> <span class="o">~~</span>
</pre></div>
</div>
<p>You need at least 2 ‘snakes’ (the tilde character), before and after the python values. But you can have more tha two, and the number doesn’t need to be exactly the same, as long as you have at least two:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">players_inventory</span> <span class="o">=</span>
    <span class="o">~~~~~~~~~</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="o">~~~~~~</span>
</pre></div>
</div>
</section>
<section id="shared-data-assignment">
<h4>Shared data assignment<a class="headerlink" href="#shared-data-assignment" title="Permalink to this heading"></a></h4>
<p>Data has multiple scopes. Data can be at the scope of a Mast story, For a scheduler, A task, and block</p>
<p>There are times you want data to be shared by all tasks within a story. To share data you add the ‘shared’ marked in front of the assignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shared</span> <span class="n">enemy_count</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">shared</span> <span class="n">beer_count</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>
</div>
<p>When using Data, scope is automatically handled you only need to specify shared at assignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shared</span> <span class="n">beer_count</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">my_beer</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Drink all the beer</span>
<span class="n">my_beer</span> <span class="o">=</span> <span class="n">my_beer</span> <span class="o">+</span> <span class="n">beer_count</span>
<span class="n">share</span> <span class="n">beer_count</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="task-flow-story-sections-via-labels">
<h3>Task Flow: Story sections via labels<a class="headerlink" href="#task-flow-story-sections-via-labels" title="Permalink to this heading"></a></h3>
<p>A mast story is broken into sections using labels.
You also can have comments, and there are also other ‘markers’ that can help organizing sections and help have them stand out in the file.</p>
<section id="labels">
<h4>Labels<a class="headerlink" href="#labels" title="Permalink to this heading"></a></h4>
<p>Labels have a Name with no spaces and are  enclosed in 2 or more equals:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">======</span> <span class="n">GotoBar</span> <span class="o">====</span>
 <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
<span class="o">==</span> <span class="n">ShowHelm</span> <span class="o">==</span>
 <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>

<span class="o">==========================================</span> <span class="n">MoreStuff</span> <span class="o">===========================</span>
 <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</pre></div>
</div>
<p>There are two labels that are implied: main and END.</p>
<p>The label “main” is the very start of the script.
The label “END” end the current task.</p>
<p>They are predefined and don’t need to be defined in script.</p>
<p>Labels are not ‘functions’, one label passes into the next label:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">========</span> <span class="n">One</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;One&quot;</span>
<span class="o">========</span> <span class="n">Two</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;Two&quot;</span>
<span class="o">=====</span> <span class="n">Three</span> <span class="o">====</span>
<span class="n">log</span> <span class="s2">&quot;Three&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">One</span>
<span class="n">Two</span>
<span class="n">Three</span>
</pre></div>
</div>
</section>
</section>
<section id="state-flow-changes-jump-push-pop">
<h3>State/Flow changes: Jump, Push, Pop<a class="headerlink" href="#state-flow-changes-jump-push-pop" title="Permalink to this heading"></a></h3>
<p>There are times you will want to change what part of a task is running.
This is done by redirecting the flow to a label.</p>
<section id="jump">
<h4>Jump<a class="headerlink" href="#jump" title="Permalink to this heading"></a></h4>
<p>This can be done by a Jump command. Which is a ‘thin arrow’ followed by the label name.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="n">Here</span>

<span class="o">========</span> <span class="n">NotHere</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;Got here later&quot;</span>
<span class="o">-&gt;</span> <span class="n">End</span>

<span class="o">========</span> <span class="n">Here</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;First&quot;</span>
<span class="o">-&gt;</span> <span class="n">NotHere</span>

<span class="o">========</span> <span class="n">End</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;Done&quot;</span>
<span class="o">-&gt;</span><span class="n">END</span>
<span class="o">========</span> <span class="n">Never</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;Can never reach&quot;</span>
</pre></div>
</div>
<p>The expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">First</span>
<span class="n">Got</span> <span class="n">Here</span> <span class="n">later</span>
<span class="n">Done</span>
</pre></div>
</div>
</section>
<section id="push-pop">
<h4>Push/Pop<a class="headerlink" href="#push-pop" title="Permalink to this heading"></a></h4>
<p>Push is kind of the “Hold my Beer” of jump. When you Push it remembers the current location. Pop returns back to that location.</p>
<p>Push is a ‘thin double arrow’ followed by the label name.</p>
<p>Pop returns back to the previous location. Pop is a backwards thin double arrow.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;See you later&quot;</span>
<span class="o">-&gt;&gt;</span> <span class="n">PushHere</span>
<span class="n">log</span> <span class="s2">&quot;and we&#39;re back&quot;</span>
<span class="o">-&gt;</span><span class="n">END</span>
<span class="o">========</span> <span class="n">PushHere</span> <span class="o">=====</span>
<span class="n">log</span> <span class="s2">&quot;Going back&quot;</span>
<span class="o">&lt;&lt;-</span>
</pre></div>
</div>
<p>The expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">See</span> <span class="n">you</span> <span class="n">later</span>
<span class="n">Going</span> <span class="n">Back</span>
<span class="ow">and</span> <span class="n">we</span><span class="s1">&#39;re back</span>
</pre></div>
</div>
</section>
<section id="jump-to-end">
<h4>Jump to End<a class="headerlink" href="#jump-to-end" title="Permalink to this heading"></a></h4>
<p>To immediately end a task you can use a Jump to End.</p>
<p>Jump to end looks like a Jump with a thin arrow and the label “END”</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-4-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-4-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">===== start ====</span>
log &quot;See you later&quot;
<span class="gd">-&gt;END</span>
log &quot;Never gets here&quot;
</pre></div>
</div>
</div><div aria-labelledby="tab-4-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;See you later&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">PollResults</span><span class="o">.</span><span class="n">OK_END</span>
</pre></div>
</div>
</div></div>
<p>The expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">See</span> <span class="n">you</span> <span class="n">later</span>
</pre></div>
</div>
<p>Jump to End ends the task. If that task the only task, the whole story ends.</p>
</section>
</section>
<section id="scheduling-tasks-and-waiting-for-them-to-complete">
<h3>Scheduling tasks and waiting for them to complete<a class="headerlink" href="#scheduling-tasks-and-waiting-for-them-to-complete" title="Permalink to this heading"></a></h3>
<p>A story can have multiple tasks running in parallel.</p>
<p>For example, a ship maybe have multiple Tasks associated with it.
One tracking it comms, several for its client consoles, and several related to ‘quest’ it is involved in.</p>
<p>To do so, new task can be scheduled. Either in python or via Mast.</p>
<section id="scheduling-tasks-in-mast">
<h4>Scheduling tasks in mast<a class="headerlink" href="#scheduling-tasks-in-mast" title="Permalink to this heading"></a></h4>
<p>Schedule a task is similar to a Jump, but it uses the Fat arrow.
The difference is another task begins, and the original task continues on.</p>
<p>Example scheduling a task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;before&quot;</span>
<span class="o">=&gt;</span> <span class="n">ATask</span>
<span class="n">log</span> <span class="s2">&quot;after&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;in task&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">before</span>
<span class="n">after</span>
<span class="ow">in</span> <span class="n">task</span>
</pre></div>
</div>
</section>
<section id="passing-data-to-a-task">
<h4>passing data to a task<a class="headerlink" href="#passing-data-to-a-task" title="Permalink to this heading"></a></h4>
<p>You can pass data to a new task. The data passed is different than the original task.</p>
<p>Example scheduling a task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Different&quot;</span>
<span class="o">=&gt;</span> <span class="n">ATask</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">}</span>
<span class="n">log</span> <span class="s2">&quot;</span><span class="si">{message}</span><span class="s2">&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;</span><span class="si">{message}</span><span class="s2">&quot;</span>
<span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Who cares&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">different</span>
<span class="n">Hello</span>
</pre></div>
</div>
</section>
<section id="named-task-and-waiting-for-a-task-or-tasks">
<h4>Named task and waiting for a Task or Tasks<a class="headerlink" href="#named-task-and-waiting-for-a-task-or-tasks" title="Permalink to this heading"></a></h4>
<p>You can assign a task to a variable by putting a name in front of the fat arrow.</p>
<p>This can be used to await the task later.</p>
<p>Example scheduling a task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Start&quot;</span>
<span class="n">task1</span> <span class="o">=&gt;</span> <span class="n">ATask</span>
<span class="k">await</span> <span class="n">task1</span>
<span class="n">log</span> <span class="s2">&quot;Done&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;task run&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Start</span>
<span class="n">task</span> <span class="n">run</span>
<span class="n">Done</span>
</pre></div>
</div>
</section>
<section id="awaiting-for-any-or-all-tasks">
<h4>Awaiting for any or all tasks<a class="headerlink" href="#awaiting-for-any-or-all-tasks" title="Permalink to this heading"></a></h4>
<p>This can be used to await a list of tasks.
You can await for ay task to complete.
And you can await for all tasks to finish.</p>
<p>Example await all:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Start&quot;</span>
<span class="n">task1</span> <span class="o">=&gt;</span> <span class="n">ATask</span> <span class="p">{</span><span class="s2">&quot;say&quot;</span><span class="p">:</span> <span class="s2">&quot;Task1&quot;</span><span class="p">}</span>
<span class="n">task2</span> <span class="o">=&gt;</span> <span class="n">ATask</span> <span class="p">{</span><span class="s2">&quot;say&quot;</span><span class="p">:</span> <span class="s2">&quot;Task2&quot;</span><span class="p">}</span>
<span class="k">await</span> <span class="nb">all</span> <span class="p">[</span><span class="n">task1</span><span class="p">,</span><span class="n">task2</span><span class="p">]</span>
<span class="n">log</span> <span class="s2">&quot;Done&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;</span><span class="si">{say}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Start</span>
<span class="n">Task1</span>
<span class="n">Task2</span>
<span class="n">Done</span>
</pre></div>
</div>
<p>Example await any:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Start&quot;</span>
<span class="n">task1</span> <span class="o">=&gt;</span> <span class="n">ATask</span> <span class="p">{</span><span class="s2">&quot;say&quot;</span><span class="p">:</span> <span class="s2">&quot;Task1&quot;</span><span class="p">}</span>
<span class="n">task2</span> <span class="o">=&gt;</span> <span class="n">ATask</span> <span class="p">{</span><span class="s2">&quot;say&quot;</span><span class="p">:</span> <span class="s2">&quot;Task2&quot;</span><span class="p">}</span>
<span class="k">await</span> <span class="nb">any</span> <span class="p">[</span><span class="n">task1</span><span class="p">,</span><span class="n">task2</span><span class="p">]</span>
<span class="n">log</span> <span class="s2">&quot;Done&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;</span><span class="si">{say}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Start</span>
<span class="n">Task1</span>
<span class="n">Task2</span>
<span class="n">Done</span>
</pre></div>
</div>
<p>The order maybe be different based on timing of the tasks.</p>
<p>For an await any if any task end, the await is satisfied.</p>
</section>
<section id="canceling-a-task">
<h4>Canceling a task<a class="headerlink" href="#canceling-a-task" title="Permalink to this heading"></a></h4>
<p>You can cancel a tasks by name from another task.</p>
<p>Example cancel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Start&quot;</span>
<span class="n">task1</span> <span class="o">=&gt;</span> <span class="n">ATask</span>
<span class="n">cancel</span> <span class="n">task1</span>
<span class="n">log</span> <span class="s2">&quot;Done&quot;</span>

<span class="o">===</span> <span class="n">ATask</span> <span class="o">===</span>
<span class="n">log</span> <span class="s2">&quot;May not run&quot;</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Start</span>
<span class="n">Done</span>
</pre></div>
</div>
</section>
</section>
<section id="conditional-statements">
<h3>Conditional Statements<a class="headerlink" href="#conditional-statements" title="Permalink to this heading"></a></h3>
<p>Mast supports both a if and match statements similar to python’s.
PyMast simply uses the python statements.</p>
<section id="if-statements">
<h4>If statements<a class="headerlink" href="#if-statements" title="Permalink to this heading"></a></h4>
<p>Mast supports if statements similar to python with if, elif, and else.
Mast is not a whitespace language so you need to close an if with and end_if</p>
<p>If conditionals can be nested as well.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-5-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-5-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">===== start ====</span>
value = 300

if value &lt; 300:
    log &quot;less&quot;
elif value &gt; 300:
log &quot;more&quot;
else:
    log &quot;equal&quot;
end_if
</pre></div>
</div>
</div><div aria-labelledby="tab-5-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
            <span class="n">log</span> <span class="s2">&quot;less&quot;</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">300</span><span class="p">:</span>
            <span class="n">log</span> <span class="s2">&quot;more&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span> <span class="s2">&quot;equal&quot;</span>
</pre></div>
</div>
</div></div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">equal</span>
</pre></div>
</div>
</section>
<section id="match-statements">
<h4>Match statements<a class="headerlink" href="#match-statements" title="Permalink to this heading"></a></h4>
<p>Mast supports match statements similar to python with match, case.
Mast is not a whitespace language so you need to close an if with and end_match</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-6-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-6-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span><span class="gh">===== start ====</span>
value = 300

match value:
    case 200:
        log &quot;200&quot;
    case 300:
        log &quot;300&quot;
    case _:
        log &quot;something else&quot;
end_match
</pre></div>
</div>
</div><div aria-labelledby="tab-6-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">PyMastStory</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@label</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="k">match</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">case</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">log</span> <span class="s2">&quot;200&quot;</span>
            <span class="k">case</span> <span class="mi">300</span><span class="p">:</span>
                <span class="n">log</span> <span class="s2">&quot;300&quot;</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="n">log</span> <span class="s2">&quot;something else&quot;</span>
</pre></div>
</div>
</div></div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">300</span>
</pre></div>
</div>
</section>
<section id="for-loops">
<h4>For loops<a class="headerlink" href="#for-loops" title="Permalink to this heading"></a></h4>
<p>Mast supports for loop similar to python with for, break, continue .
Mast is not a whitespace language so you need to close an if with and next.</p>
<p>PyMast uses the standard python for or while loop.</p>
<p>However, mast support a for … in loop and a for .. while loop.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-7-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-7-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-7-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span>for x in range(3):
    log &quot;{x}&quot;
next x

y = 10
for z while y &lt; 30:
    log &quot;{z} {y}&quot;
    y += 10
next z
</pre></div>
</div>
</div><div aria-labelledby="tab-7-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-7-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">log</span> <span class="s2">&quot;</span><span class="si">{x}</span><span class="s2">&quot;</span>

<span class="n">y</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
    <span class="n">log</span> <span class="s2">&quot;</span><span class="si">{z}</span><span class="s2"> </span><span class="si">{y}</span><span class="s2">&quot;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="mi">10</span>
    <span class="n">z</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div></div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">0</span> <span class="mi">10</span>
<span class="mi">1</span> <span class="mi">20</span>
<span class="mi">2</span> <span class="mi">30</span>
</pre></div>
</div>
</section>
</section>
<section id="comments-and-markers">
<h3>Comments and Markers<a class="headerlink" href="#comments-and-markers" title="Permalink to this heading"></a></h3>
<p>Comments provide code extra information to help make it more understandable.</p>
<p>Mast provides comments, Multi-line comments and markers to help make the code easier to understand and navigate.</p>
<section id="comments">
<h4>Comments<a class="headerlink" href="#comments" title="Permalink to this heading"></a></h4>
<p>Single line comments start with a # and go until the end of the line.</p>
<p>Comments use the # like python does:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fred</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># set fred to 10</span>
</pre></div>
</div>
</section>
<section id="multi-line-comments-aka-block-comments">
<h4>Multi line Comments aka block comments<a class="headerlink" href="#multi-line-comments-aka-block-comments" title="Permalink to this heading"></a></h4>
<p>You can have a c style block comment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*********</span>
<span class="n">Beware</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">tricky</span> <span class="n">part</span>
<span class="o">****/</span>
</pre></div>
</div>
<p>Using block comments to ‘disable’ code it can quickly get confusing. Therefore, an additional block comment is supported.</p>
</section>
</section>
<section id="importing">
<h3>Importing<a class="headerlink" href="#importing" title="Permalink to this heading"></a></h3>
<p>You can break up mast content into multiple files and use import to included them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">story_two.mast</span>
</pre></div>
</div>
<p>The import command also supports importing from a zip fill:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">my_lib.zip</span> <span class="kn">import</span> <span class="n">bar</span><span class="o">.</span><span class="n">mast</span>
</pre></div>
</div>
<p>One use of the zip file concept it to create a sharable library of things.</p>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this heading"></a></h3>
<p>Mast supports syntax to simplify pythons logging features.</p>
<p>The logger command sets up logging.</p>
<p>Logging needs to be enabled</p>
<p>Logging can enabled for stdout, to a string stream (stringIO) variable, and a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># enable logging to stdout</span>
<span class="n">logger</span>
<span class="c1"># enable logging to stdout, and a string</span>
<span class="n">logger</span> <span class="n">string</span> <span class="n">my_string_logger</span>
<span class="c1"># enable logging to stdout, and a file</span>
<span class="n">logger</span> <span class="n">file</span> <span class="s2">&quot;</span><span class="si">{mission_dir}</span><span class="s2">/my_log.log&quot;</span>
<span class="c1"># enable logging to stdout, a string and a file</span>
<span class="n">logger</span> <span class="n">string</span> <span class="n">my_string_logger</span> <span class="n">file</span> <span class="s2">&quot;</span><span class="si">{mission_dir}</span><span class="s2">/my_log.log&quot;</span>
</pre></div>
</div>
<p>You can have multiple loggers, each logger can have separate strings, or files.</p>
<p>The default logger does not need to specify the name.</p>
<p>To create a new loggers by using the logger command specifying a name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="n">name</span> <span class="n">tonnage</span> <span class="n">string</span> <span class="n">tonnage</span>
</pre></div>
</div>
<p>The log command is how you send messages to the log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Hello, World&quot;</span>
<span class="n">log</span> <span class="n">name</span> <span class="n">tonnage</span> <span class="s2">&quot;Tonnage score </span><span class="si">{tonnage}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>The log command can accept levels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">&quot;Hello, World&quot;</span> <span class="n">info</span>
<span class="n">log</span> <span class="s2">&quot;Hello, World&quot;</span> <span class="n">debug</span>
<span class="n">log</span> <span class="s2">&quot;Hello, World&quot;</span> <span class="n">error</span>
</pre></div>
</div>
<p>These are visible is the stdout messages.</p>
</section>
<section id="delay-command">
<h3>Delay command<a class="headerlink" href="#delay-command" title="Permalink to this heading"></a></h3>
<p>The delay command continues to execute for a period of time.</p>
<p>A Delay needs a clock to use Artemis Cosmos has two clocks and sim.
The gui clock is running continuously (realtime), the sim clock can be paused when the simulation is not running(game time).</p>
<p>For gui and other things use the gui clock.
If you want to delay 10s of game time use sim.</p>
<p>Delay can specify minutes and seconds. Some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="n">gui</span> <span class="mi">1</span><span class="n">m</span>
<span class="n">delay</span> <span class="n">gui</span> <span class="mi">10</span><span class="n">s</span>
<span class="n">delay</span> <span class="n">gui</span> <span class="mi">1</span><span class="n">m</span> <span class="mi">5</span><span class="n">s</span>
<span class="n">delay</span> <span class="n">sim</span> <span class="mi">10</span><span class="n">m</span>
</pre></div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-TWFzdA==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-TWFzdA==" name="TWFzdA==" role="tab" tabindex="0">Mast</button><button aria-controls="panel-8-UHlNYXN0" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-UHlNYXN0" name="UHlNYXN0" role="tab" tabindex="-1">PyMast</button></div><div aria-labelledby="tab-8-TWFzdA==" class="sphinx-tabs-panel code-tab group-tab" id="panel-8-TWFzdA==" name="TWFzdA==" role="tabpanel" tabindex="0"><div class="highlight-mast notranslate"><div class="highlight"><pre><span></span>for x in range(3):
    log &quot;{x}&quot;
    delay gui 1s
next x
</pre></div>
</div>
</div><div aria-labelledby="tab-8-UHlNYXN0" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-8-UHlNYXN0" name="UHlNYXN0" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">log</span> <span class="s2">&quot;</span><span class="si">{x}</span><span class="s2">&quot;</span>
    <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index_contrib.html" class="btn btn-neutral float-left" title="Contribution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mastsyntax.html" class="btn btn-neutral float-right" title="Language Basics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Doug Reichard.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>