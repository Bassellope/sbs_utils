import bar.mast

shared alisa = "ter #6d8b01 3 0;ter #6d8b01 4 1;ter #6d8b01 4 3;ter #CC9966 8 4 6 -2;ter #fff 13 0 14 -2;ter #fff 3 6;"
shared frank = "ter #f2efee 0 0;ter #f2efee 2 0;ter #f2efee 0 3;ter #fff 12 1 14 -2;ter #fff 2 6;ter #3d0463 9 0 12 4;"
shared mission_started = False

# Non-Shared data unique to the client (runner)
learn = True
console = "Console"
mast_view  = "Mast"
view = "View"
ship_select = "Ship"
text_in = "Hello, World"

style .choice="padding:0.5,0,0.5,0;"
style .button="padding:0.5,0.25,0.5,0.25;"
style .input="padding:0.5,0.25,0.5,0.25;"
style .checkbox="padding:0.5,0.25,0.5,0.25;"
style .slider="padding:0.5,0.25,0.5,0.25;"


->Briefing

================== Briefing ================

section style="area: 0, 30px, 60, 100-30px;"


face alisa
"""""""""""""""""""""""""""""""""
Welcome to the TSN
I'm Captain Alisa. I've been running things in this sector for 10 years. We run a tight sector.
I don't take any crap and I do not like people who lie and disobey orders out of a matter of principle.
"""""""""""""""""""""""""""""""""
row

"""""""""""""""""""""""""""""""""
Hi, I'm Captain frank. Alisa isn't that bad once you get to know her.

You're in for an adventure

Have you ever flown a spaceship?
"""""""""""""""""""""""""""""""""

face frank


section style="area: 60, 10, 100, 100-30px;"

blank
row
ship "tsn_battle_cruiser"
row
blank
"""""""""""""""""""""""""""""""""
This is your first ship
"""""""""""""""""""""""""""""""""
blank

await choice:
    + "Yes.." if learn == True:
        -> YouLied 
    + "Yes.." if learn == False:
        -> YouTrained 
    + "Ready to learn":
         -> Learn
    + "Bar":
     ->> GotoBar
    + "HUD":
    ->> Hud
    + "Exit":
    ->END
end_await

# This is for the bar/hud when they pops
->Briefing

=========== Test ============

""" {self} """
->END


=================== YouLied ========

section style="area: 20, 10, 100, 100-30px;"
face alisa

""""""""""""""""""""""""""""""""""""""""""""""
I will not tolerate those who are untruthful.

You should board the next shuttle and get the hell out of my sector
"""""""""""""""""""""""""""""""""""""""""""

await choice:
+ "Exit":
->END
end_await


============== YouTrained =========

section style="area: 20, 10, 100, 100-30px;"

face alisa

"""""""""""""""""""""""""""""""""
Congratulations!

Your training is complete

You're ready to command your own ship.

Good luck
"""""""""""""""""""""""""""""""""

await choice:
    + "Resume Mission"  if mission_started==True:
        -> ResumeMission
    + "Start Mission"  if mission_started==False:
     -> StartMission
end_await

================= StartMission ==============================

~~sbs.create_new_sim()~~

shared mission_started = True
->>MapStuff
->ResumeMission

================= ResumeMission ==============================
~~ sbs.resume_sim() ~~
->YouTrained

==================           Learn     ===========

section style="area: 20, 20, 100, 40;"

learn = False

button "Test 1":
 -> Learn 
 end_button

button "Test 2":
 ->Learn 
end_button
button "Test 3":
 -> Learn  
end_button
button "Test 4":
->Learn 
end_button
row
button "Test 5":
-> Learn
end_button
button "Test 6":
 ->Learn 
end_button
button "Test 7":
-> Learn 
end_button
button "Test 8":
 ->Learn 
 end_button
row
button "Test 9":
 -> Briefing 
 end_button
button "Test 10":
 -> Briefing 
 end_button
row

input text_in

#slider slider_value 0.0 1.0 0.5
checkbox wilma "Yaba"

await choice:
+ "exit":
  ->END
end_await

====================== NoChoice ======================

->END


====================== MapStuff ======================
shared player = PlayerShip().spawn(sim, 0, 0, 0,"Artemis", "tsn", "Battle Cruiser").py_object
shared hera = PlayerShip().spawn(sim, 0, 0, 0,"Hera", "tsn", "Battle Cruiser").py_object
shared atlas = PlayerShip().spawn(sim, 0, 0, 0,"Atlas", "tsn", "Battle Cruiser").py_object
~~sbs.assign_client_to_ship(0, player.id)~~
shared tsn =  ~~ [
    Npc().spawn(sim, 1000, 0, 1000, "TSN0", "tsn", "Battle Cruiser", "behav_npcship").py_object,
    Npc().spawn(sim ,1200, 0, 1000, "TSN1", "tsn", "Battle Cruiser", "behav_npcship").py_object,
    Npc().spawn(sim, 1400, 0, 1000, "TSN2", "tsn", "Battle Cruiser", "behav_npcship").py_object
    ]~~

<<-


===================== Menu ============
if IS_SERVER:
    section style="area: 100-500px,0, 100, 30px;"
else:
    section style="area: 100-500px, 0, 100, 30px;"
end_if


dropdown ship_select "text: ship;list:Artemis,Hera,Atlas":   #ddd
<<->>PickedShip
end_dropdown

dropdown console "text: console;list:Helm,Weapons,Science,Engineering,Comms,Medical,Main Screen": 
view = "Main"
->>PickedView
end_dropdown

dropdown view "text: view;list:Main,Auxiliary,Crafting,Quarters,P.A.D.D.,Broadcast,Bar":
->>PickedView
end_dropdown

dropdown mast_view "text: Mast;list:Variables,Debug,restart":
->>PickedMast
end_dropdown

section style="area: 0, 30px, 100, 100-30px;"
<<-


===================== Hud ============
->> Menu

"""
Welcome, select your ship, and console.

You can also select from a selection of different views.

"""

await choice:
    + "Back":
        <<-
end_await

========== PickedShip =====
match ship_select:
case "Artemis":
~~
sbs.assign_client_to_ship(client_id, player.id)
sbs.send_message_to_player_ship(0,"yellow","New officer")
sbs.send_message_to_player_ship(player.id,"blue","New officer")
sbs.send_message_to_player_ship(hera.id,"red","New officer")
sbs.send_message_to_player_ship(atlas.id,"green","New officer")
~~
case "Hera":
~~
sbs.assign_client_to_ship(client_id, hera.id)
sbs.send_message_to_player_ship(0,"yellow","New officer")
sbs.send_message_to_player_ship(player.id,"blue","New officer")
sbs.send_message_to_player_ship(hera.id,"red","New officer")
sbs.send_message_to_player_ship(atlas.id,"green","New officer")
~~
case "Atlas":
~~
sbs.assign_client_to_ship(client_id, atlas.id)
sbs.send_message_to_player_ship(0,"yellow","New officer")
sbs.send_message_to_player_ship(player.id,"blue","New officer")
sbs.send_message_to_player_ship(hera.id,"red","New officer")
sbs.send_message_to_player_ship(atlas.id,"green","New officer")
~~
end_match

-> PickedView



========== MainView =====
->> Menu


match console:
    case "Helm":
        widget_list "normal_helm" "3dview^2dview^helm_movement^throttle^request_dock^shield_control^ship_data^text_waterfall^main_screen_control"
    case "Weapons":
        widget_list "normal_weap" "2dview^weapon_control^weap_beam_freq^ship_data^shield_control^text_waterfall^main_screen_control"
    case "Science":
        widget_list "normal_sci" "science_2d_view^ship_data^text_waterfall^science_data^science_sorted_list"
    case "Engineering":
        widget_list "normal_engi" "ship_internal_view^grid_object_list^grid_face_grid_control^text_waterfall^eng_heat_controls^eng_power_controls^ship_data"
    case "Comms":
        widget_list "normal_comm" "text_waterfall^comms_waterfall^comms_control^comms_face^comms_sorted_list^ship_data"
    case "Main Screen":
        widget_list "normal_main" "3dview^ship_data^text_waterfall"
    case _:
        """Pick a Console"""
end_match
await gui

========== PickedView =====
->> Menu
match view:
    case "Main":
        -> MainView
    case "Auxiliary":
        -> ViewAux
    case "Crafting":
        -> ViewCrafting
    case "Quarters":
        -> ViewQuarters
    case "P.A.D.D.":
        -> ViewPad
    case "Broadcast":
        -> BroadcastTest
    case "Bar":
        ->> GotoBar
        ->Hud
    case _:
        -> MainView
end_match

"""
Unrreachable?
"""
await gui

========== PickedMast =====
->> Menu

"""
Mast {mast_view}
"""
await choice:
    + "Back":
        <<-
end_await

====== BroadcastTest ==============
have *PlayerShip broadcast "Hello"
<<-

========== ViewQuarters =====
->> Menu

image "{mission_dir}\data\quarters"

await gui

========== ViewCrafting =====
->> Menu

image "{mission_dir}\data\crafting"

await gui
========== ViewPad =====
->> Menu

image "{mission_dir}\data\datapad"

await gui

========== ViewAux =====
->> Menu

"""
This would be the auxiliary Screen
"""
await gui
